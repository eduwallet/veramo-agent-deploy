{
  "correlationId": "{{ instance.name }}",
  "overwriteExisting": true,
  "metadata": {
    "credential_issuer": "{{ protocol }}://{{ basedomain }}/{{ instance.name }}",
    "credential_endpoint": "{{ protocol }}://{{ basedomain }}/{{ instance.name }}/credentials",{% if instance.as is defined %}
    "authorization_servers": ["{{ instance.as }}"],
{% endif %}    
    "display": [
      {
        "name": "{{ instance.pubName }}",
        "client_name": "{{ instance.pubName }}",
        "description": "{{ instance.pubName }}"
{% if instance.logo is defined -%}
        ,"logo": {
          "uri": "{{ instance.logo }}",
          "url": "{{ instance.logo }}",
          "alt_text": "{{ instance.logo_alttext }}"
        }
{% endif -%}
      }
    ],
    "credential_configurations_supported": {
{% for cid,credential in instance.credentials.items() %}
{% if not loop.first -%},{% endif -%}
      "{{ cid }}": {
        "display": [
          {
            "name": "{{ credential.name }}",
            "description": "{{ credential.description }}",
            "text_color": "{{ credential.color }}",
{% if credential.logo is defined -%}            
            "logo": {
              "uri": "{{ credential.logo }}",
              "url": "{{ credential.logo }}",
              "alt_text": "{{ credential.logo_alttext }}"
            },
{% endif -%}
            "background_color": "{{ credential.background_color }}"
{% if credential.card is defined -%}
            ,"background_image": {
              "uri": "{{ credential.card }}",
              "url": "{{ credential.card }}"
            }
{% endif -%}
          }
        ]
      }
{% endfor %}
    }
  }
}
